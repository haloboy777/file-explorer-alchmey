(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,i){"use strict";i.r(t);var a=i(5),n=i(0),s=i.n(n),o=i(10),r=i.n(o),c=(i(96),i(63)),l=i(64),d=i(82),h=i(81),p=i(27),u=i(65),j=i.n(u),f=i(144),m=i(145),g=i(55),x=i(164),b=i(146),O=i(147),v=i(161),y=i(148),C=i(149),S=i(150),k=i(151),w=i(162),F=i(152),P=i(153),D=i(154),I=i(158),N=i(155),T=i(156),X=i(157),J=i(4),R=i(159),z=i(77),B=i.n(z),L=i(78),Q=i.n(L),W=i(75),G=i.n(W),E=i(67),U=i.n(E),A=i(71),H=i.n(A),M=i(72),_=i.n(M),q=i(74),K=i.n(q),V=i(73),Y=i.n(V),Z=i(80),$=i.n(Z),ee=i(76),te=i.n(ee),ie=i(79),ae=i.n(ie),ne=i(12),se=i(163),oe=i(66),re=i(141),ce=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(i){var n=re.a.apply(void 0,t);return Object(a.jsx)(e,Object(oe.a)({mediaQuery:n},i))}}},le=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var a;return Object(c.a)(this,i),(a=t.call(this,e)).itemClick=function(e,t,i){console.log(e,t,i);var n=JSON.parse(JSON.stringify(a.state.path));if(0===e){"/"===n[0]&&n.length>1&&(n[0]="");var s=n.join("/")+"/"+t;a.fetchPath(s).then((function(e){return a.renderPath(e)}))}else if(1===e){var o=n.slice(0,i+1);"/"===n[0]&&o.length>1&&(o[0]="");var r=o.join("/");console.log(r,n),a.fetchPath(r).then((function(e){return a.renderPath(e)}))}else if(2===e){"/"===n[0]&&n.length>1&&(n[0]="");var c=encodeURIComponent(n.join("/")+"/"+t.name);console.log(c,n.join("/")+"/"+t.name),"text"===t.icon||"code"===t.icon?fetch(a.basePath+"/getFile/"+encodeURIComponent(t.name)+"?path="+c).then((function(e){return e.text()})).then((function(e){a.setState({dialog:{open:!0,title:t.name,text:e,type:"text"}})})):"photo"===t.icon?a.setState({dialog:{open:!0,title:t.name,url:a.basePath+"/getFile/"+encodeURIComponent(t.name)+"?path="+c,type:"photo"}}):"video"===t.icon?a.setState({dialog:{open:!0,title:t.name,url:a.basePath+"/video/"+encodeURIComponent(t.name)+"?path="+c,type:"video"}}):"descX"!==t.icon&&"default"!==t.icon&&"music"!==t.icon&&"videoX"!==t.icon||window.open(a.basePath+"/getFile/"+encodeURIComponent(t.name)+"?path="+c,"_blank")}},a.dialogClose=function(){a.setState({dialog:{open:!1,title:"",text:"",type:""}})},a.closeCreateDialog=function(){a.setState({createDialogOpen:!1,createDialog:{name:{},text:{},alert:{}}},(function(){var e=JSON.parse(JSON.stringify(a.state.path));"/"===e[0]&&e.length>1&&(e[0]=""),a.fetchPath(e.join("/")).then((function(e){return a.renderPath(e)}))}))},a.openCreateDialog=function(){a.setState({createDialogOpen:!0,createDialog:{name:{},text:{},alert:{}}})},a.saveFile=function(){if(!a.state.savingFile){var e=document.getElementById("crFileName").value,t=document.getElementById("crFileText").value,i={name:{},text:{},alert:{}};if(""===e&&(i.name={err:!0,errTxt:"Please fill this field"}),""===t&&(i.text={err:!0,errTxt:"Please fill this field"}),a.setState({createDialog:i,savingFile:!0}),""!==e&&""!==t){var n=JSON.parse(JSON.stringify(a.state.path));"/"===n[0]&&n.length>1&&(n[0]=""),fetch(a.basePath+"/createFile",{method:"POST",body:JSON.stringify({filePath:n.join("/")+"/"+e,text:t})}).then((function(e){return e.json()})).then((function(e){var t;t=e.error?{open:!0,severity:"error",text:e.message}:{open:!0,severity:"success",text:e.message},a.setState({createDialog:{name:{},text:{},alert:t},savingFile:!1})}))}}},a.filterFiles=function(e){var t=e.target.value.toLowerCase();a.setState((function(e){return{files:e.OGfiles.filter((function(e){return e.name.toLowerCase().includes(t)})),folders:e.OGfolders.filter((function(e){return e.toLowerCase().includes(t)}))}}))},a.fetchPath=function(e){return fetch(a.basePath+"/loadDir",{method:"POST",body:JSON.stringify({path:e})}).then((function(e){return e.json()}))},a.renderPath=function(e){if(e.error)a.setState({err:e,loading:!1});else{var t=e.files.map((function(e){var t="default";return a.state.types[e.type.slice(1)]&&(t=a.state.types[e.type.slice(1)]),{name:e.name,icon:t}})),i=e.resolvedPath.split("/");""===i[0]&&(i[0]="/"),a.setState({folders:e.folders,files:t,OGfiles:t,OGfolders:e.folders,path:i,loading:!1,err:!1})}},a.appRef=s.a.createRef(),a.basePath="/api",a.state={files:[],folders:[],err:!1,savingFile:!1,dialog:{title:"",text:"",open:!1,type:""},createDialogOpen:!1,createDialog:{name:{},text:{},alert:{}},types:{png:"photo",jpeg:"photo",jpg:"photo",gif:"photo",tiff:"photo",psd:"photo",svg:"photo",ico:"photo",docx:"descX",doc:"descX",txt:"text",vtt:"text",pdf:"descX",md:"text",json:"text",mov:"videoX",mkv:"videoX",mp4:"video",wmv:"videoX",avi:"videoX",flv:"videoX",m4a:"music",flac:"music",wav:"music",mp3:"music",aac:"music",m4b:"music",ogg:"music","3gp":"music",js:"code",jsx:"code",py:"code",kt:"code",java:"code",c:"code",cpp:"code",swift:"code",sh:"code",h:"code",php:"code",class:"code",pl:"code",cgi:"code"},loading:!0},a}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=this;this.fetchPath(".").then((function(t){return e.renderPath(t)}))}},{key:"fileIcon",value:function(e){return"photo"===e?Object(a.jsx)(U.a,{style:{fontSize:"5rem"}}):"video"===e||"videoX"===e?Object(a.jsx)(H.a,{style:{fontSize:"5rem"}}):"music"===e?Object(a.jsx)(_.a,{style:{fontSize:"5rem"}}):"code"===e?Object(a.jsx)(Y.a,{style:{fontSize:"5rem"}}):"default"===e?Object(a.jsx)(K.a,{style:{fontSize:"5rem"}}):"text"===e||"descX"===e?Object(a.jsx)(G.a,{style:{fontSize:"5rem"}}):void 0}},{key:"render",value:function(){var e,t,i,n=this,s=this.props.classes;return Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsx)(f.a,{position:"sticky",children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{className:s.title,variant:"h6",noWrap:!0,children:"File Explorer"}),Object(a.jsxs)("div",{className:s.search,children:[Object(a.jsx)("div",{className:s.searchIcon,children:Object(a.jsx)(te.a,{})}),Object(a.jsx)(x.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},onChange:j()(this.filterFiles,200),inputProps:{"aria-label":"search"},disabled:this.state.loading})]})]})}),this.state.loading&&Object(a.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(a.jsx)(b.a,{color:"secondary"})}),!this.state.loading&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(O.a,{maxWidth:"lg",children:[Object(a.jsx)(v.a,{maxItems:5,itemsBeforeCollapse:2,itemsAfterCollapse:2,separator:Object(a.jsx)(B.a,{fontSize:"default"}),className:s.breadBox,children:null===(e=this.state.path)||void 0===e?void 0:e.map((function(e,t){return Object(a.jsx)(y.a,{onClick:function(){return n.itemClick(1,e,t)},href:"#",color:n.state.path.length-1===t?"textPrimary":"inherit",children:e},e)}))}),Object(a.jsxs)("div",{className:s.itemsBox,children:[Object(a.jsx)(C.a,{cellHeight:120,cols:this.props.mediaQuery?5:3,children:null===(t=this.state.folders)||void 0===t?void 0:t.map((function(e,t){return Object(a.jsxs)(S.a,{cols:1,onClick:function(){return n.itemClick(0,e,t)},children:[Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsx)(Q.a,{style:{fontSize:"5rem"}})}),Object(a.jsx)(g.a,{align:"center",variant:"body2",title:e,children:e})]},t)}))}),Object(a.jsx)(k.a,{light:!0,variant:"middle"}),Object(a.jsx)(C.a,{cellHeight:120,cols:this.props.mediaQuery?5:3,style:{padding:"16px 0"},children:null===(i=this.state.files)||void 0===i?void 0:i.map((function(e,t){return Object(a.jsxs)(S.a,{cols:1,onClick:function(){return n.itemClick(2,e,t)},children:[Object(a.jsx)("div",{style:{textAlign:"center"},children:n.fileIcon(e.icon)}),Object(a.jsx)(g.a,{align:"center",variant:"body2",title:e.name,children:e.name})]},t)}))})]})]}),Object(a.jsxs)("div",{className:s.bottomInfo,children:[this.state.files.length+this.state.folders.length," items ("," ",this.state.folders.length," folders, ",this.state.files.length," ","files )"]})]}),this.state.err&&Object(a.jsxs)("h1",{children:["There is an err : ",JSON.stringify(this.state.err)]}),Object(a.jsxs)(w.a,{open:this.state.createDialogOpen,children:[Object(a.jsx)(F.a,{style:{padding:"16px 24px 0 24px"},children:"Create File"}),Object(a.jsxs)(P.a,{children:[this.state.createDialog.alert.open&&Object(a.jsx)(R.a,{severity:this.state.createDialog.alert.severity,children:this.state.createDialog.alert.text}),Object(a.jsx)(D.a,{children:"File will be created in current directory"}),Object(a.jsx)(I.a,{autoFocus:!0,error:this.state.createDialog.name.err,helperText:this.state.createDialog.name.errTxt,margin:"dense",multiline:!0,label:"File Name",id:"crFileName",fullWidth:!0}),Object(a.jsx)(I.a,{margin:"normal",error:this.state.createDialog.text.err,helperText:this.state.createDialog.text.errTxt,rows:4,rowsMax:10,id:"crFileText",multiline:!0,label:"Text",fullWidth:!0})]}),Object(a.jsxs)(N.a,{children:[Object(a.jsx)(T.a,{onClick:this.closeCreateDialog,color:"secondary",children:"Close"}),Object(a.jsx)(T.a,{onClick:this.saveFile,disabled:this.state.savingFile,startIcon:this.state.savingFile?Object(a.jsx)(b.a,{size:20}):Object(a.jsx)(ae.a,{}),color:"primary",children:"Save"})]})]}),Object(a.jsxs)(w.a,{fullScreen:!this.props.mediaQuery,open:this.state.dialog.open,onClose:this.dialogClose,scroll:"paper",maxWidth:"lg",children:[Object(a.jsx)(F.a,{children:this.state.dialog.title}),Object(a.jsxs)(P.a,{dividers:!0,children:["text"===this.state.dialog.type&&Object(a.jsx)("pre",{children:this.state.dialog.text}),"photo"===this.state.dialog.type&&Object(a.jsx)("img",{src:this.state.dialog.url,alt:this.state.dialog.title,style:{minWidth:"100%",width:this.props.mediaQuery?"auto":"312px",height:"auto"}}),"video"===this.state.dialog.type&&Object(a.jsx)("video",{controls:!0,autoPlay:!0,style:{minWidth:"100%",minHeight:"100%",width:this.props.mediaQuery?"auto":"312px",height:"auto"},children:Object(a.jsx)("source",{src:this.state.dialog.url,type:"video/mp4"})})]}),Object(a.jsx)(N.a,{children:Object(a.jsx)(T.a,{onClick:this.dialogClose,color:"primary",children:"Close"})})]}),Object(a.jsx)(X.a,{className:s.fab,color:"primary",size:this.props.mediaQuery?"large":"medium",onClick:this.openCreateDialog,"aria-label":"add",children:Object(a.jsx)($.a,{})})]})}}]),i}(s.a.Component),de=Object(J.a)((function(e){return{root:{flexGrow:1},title:Object(p.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),itemsBox:{padding:"16px 0"},breadBox:{padding:"16px 16px 0 16px"},bottomInfo:{position:"fixed",bottom:0,width:"100%",background:e.palette.primary.light,color:e.palette.primary.contrastText,padding:"4px 18px"},search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ne.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ne.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(p.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"24ch","&:focus":{width:"32ch"}}),fab:Object(p.a)({position:"fixed",bottom:40,right:20},e.breakpoints.up("sm"),{bottom:58,right:40})}}))(ce("(min-width:600px)")(Object(se.a)(le))),he=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,166)).then((function(t){var i=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;i(e),a(e),n(e),s(e),o(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(de,{})}),document.getElementById("root")),he()},96:function(e,t,i){}},[[111,1,2]]]);
//# sourceMappingURL=main.73336ee7.chunk.js.map